<!-- REJOIN section -->
<div class="ui raised green segment">
  <div class="ui dividing header">
    <i class="green sign in icon"></i>
    <div class="content">Return to Club</div>
  </div>
  <div class="ui content" data-label="update loan">
    <%= form_for(@player, as: :player, method: :post, remote: true, url: { action: :rejoin }, html: { class: 'ui large fluid form', data: { confirm: "Sign New Contract with #{@player.name}?"} }) do %>
      <div class="ui stackable grid">
        <%= fields_for :contracts, @player.contracts.new.init do |f| %>
          <div class="equal width row">
            <div class="column">
              <div class="required field" no-empty>
                <%= f.label :date_effective, 'Contract Starts' %>
                <div class="ui left icon input">
                  <i class="calendar icon"></i>
                  <%= f.text_field :date_effective, value: @team.current_date, data: { flatpickr: true} %>
                </div>
              </div>
            </div>
            <div class="column">
              <div class="field">
                <%= f.label :party, 'Origin' %>
                <%= f.text_field :party %>
              </div>
            </div>
            <div class="column">
              <div class="field">
                <label>Loaned Player?</label>
                <div class="inline fields">
                  <div class="field">
                    <div class="ui radio checkbox">
                      <%= f.radio_button :loan, false %>
                      <%= f.label :loan_false, 'No' %>
                    </div>
                  </div>
                  <div class="field">
                    <div class="ui radio checkbox">
                      <%= f.radio_button :loan, true %>
                      <%= f.label :loan_true, 'Yes' %>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
          <%= f.fields_for :transfer_cost do |cf| %>
            <div class="equal width row">
              <div class="column">
                <div class="field">
                  <%= cf.label :price, 'Transfer Fee' %>
                  <div class="ui left icon input">
                    <i class="money icon"></i>
                    <%= cf.number_field :price %>
                  </div>
                </div>
              </div>

              <div class="column">
                <div class="field">
                  <%= cf.label :player_id, 'Traded Player' %>
                  <%= cf.select :player_id,
                    grouped_options_for_select(@team.grouped_players, cf.object.player_id),
                    { include_blank: true },
                    { class: 'players fluid dropdown'} %>
                </div>
              </div>

              <div class="column">
                <div class="field">
                  <%= cf.label :notes %>
                  <%= cf.text_field :notes %>
                </div>
              </div>
            </div>
          <% end %>
        <% end %>

        <div class="six wide column">
          <%= submit_tag 'SIGN NEW CONTRACT', class: "ui green submit button" %>
        </div>
      </div>
    <% end %>
  </div>
</div>